.. NEMO-RELOC documentation master file

##########################
NEMO-RELOC's documentation
##########################

Relocatable NEMO configurations. The central aim of this documentation is to
help save time so that you can do other things.

The following code base uses a version of NEMO that is in precedes v4 but is
after v3.6. In many ways the dynamics are still at v3.6 but the configuration setup
is the same as v4. In NEMOv4 the domain configuration setup is abstracted
from the code base as a preprocessing step. This is an essential process when
building a new configuration. We therefore refer to the codebase
used herein as vp4 (preceding v4), or the ORCHESTRA branch, as it was developed
for a NERC project ORCHESTRA `(NE/N018095/1) <http://gotw.nerc.ac.uk/list_full.asp?pcode=NE%2FN018095%2F1>`_
As well as a specific version of NEMO, this documentation was targeted at
running on the ARCHER HPC (www.archer.ac.uk). Though the principles are transferrable.

The documentation is divided into sections. As an introduction and overview to
the process, the first section contains the recipe specific for the 1/12 deg SE
Asia configuration. The second section contains a number of common modules, or
steps, that are described in more detail and that are part of the build process
 but are not specific to any particular configuration. Section 3 addresses some common trouble shooting
issues. Section 4 presents some simple diagnostics tools for visualising output,
and Section 5 presents recipes from some other configurations.



**************************************
Complete SE Asia (1/12 deg) Recipe:
**************************************


.. toctree::
   :maxdepth: 1

   SEAsia




*********
Diagnostic tools:
*********

Not sure how to do this currently have a few repo python scripts that might
   be useful:

.. toctree::
  :maxdepth: 1

  diagnostics

  rebuild_and_inspect_NEMO_output


************************
Other configurations:
************************

We could add other configuration recipes here.

* SANH - Jenny's wiki is nicely put together (Physics only)

* EAfrica: This configuration was generated by jdha and valegu for the ACCORD proposal,
using vp4. This recipe ports and runs that domain to the local user. The code is
compiled but forcings are taken from jdha. The new domain_cfg.nc is generated
in the recipe. This is a tide only simulation.

* LBay_180m: In vp4 a significant challenge is in getting the new namelists to
work. Having made progress in LBay_livljobs4 on branch
 ``LBay-orchestra-code-base`` but run into GRIDGEN problems. Decided to make a
 new branch and start with the old 180m POLCOMS bathymetry and coordinates file
  for Liverpool Bay. This gets a new branch (incase we fix the GRIDGEN problem).
 At the time of writing this is where I am. *(16 Oct)*:

* SWPacific

* Madagascar

* ...

*******************
Common Modules:
*******************

These common modules are used in the configuration recipes. They are generally
abstracted as _modules_ when the process is common to more than one configuration.

.. toctree::
   :maxdepth: 2

   link_scripts_main_setup.rst

   link_scripts_make_paths.rst

   link_scripts_make_directories

   link_scripts_make_xios

   link_scripts_make_nemo

   link_scripts_make_nemo_fabm_ersem

   link_scripts_make_tools

   link_scripts_make_coordinates_from_parent

   link_scripts_make_bathymetry_from_parent

   link_scripts_make_bathymetry_from_gebco

   link_scripts_make_domain_cfg

   link_scripts_make_river_forcing

   link_scripts_prep_ERA5_forcing

   link_scripts_make_ERA5_weights

   link_scripts_download_CMEMS

   link_scripts_make_CMEMS_IC

   MPP_decomp_land_suppression


*****************************
Notes on Trouble Shooting:
*****************************

.. toctree::
 :maxdepth: 2

 trouble_shooting

 updating_namelist_cfg_from_v3.6_to_vp4


*********************
Building the docs:
*********************

.. toctree::
  :maxdepth: 1

  compiling_documentation


******************
Appendix: Tidal code modifications
******************

.. toctree::
  :maxdepth: 1

  tidal_code_modifications

******************
Appendix: Old stuff:
******************

These common modules are used in the configuration recipes. They are generally
abstracted _modules_ when the process is common to more than one configuration.

.. toctree::
 :maxdepth: 1

 build_siren_tools

 install_nrct

 generate_initial_conditions

 Add_more_SBC

 FES2014_NEMO

Indices and tables
==================

* :ref:`genindex`
* :ref:`modindex`
* :ref:`search`
